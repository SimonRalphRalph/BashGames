/* =========================================================
   GameStudio — OpenAI-inspired theme (refactored)
   Order: Tokens → Resets → Base → Layout → Components → States → Utilities → Media
   ========================================================= */

/* -------------------- */
/* TOKENS (dark)        */
/* -------------------- */
:root{
  /* Palette */
  --bg: #0B0C0E;
  --surface: #0E0F12;
  --panel: #111216;
  --panel-2: #0B0C0D;
  --card: #0F1114;

  --text: #ECEDEE;
  --muted: #9AA0A6;
  --stroke: rgba(255,255,255,0.09);

  /* Brand */
  --brand: #14A37F;
  --brand-2: #2BB891;

  /* Canvas */
  --canvas-bg: #0A0B0D;

  /* Misc */
  --radius: 12px;
  --shadow: 0 8px 24px rgba(0,0,0,.35), 0 1px 0 rgba(255,255,255,0.02) inset;

  /* Type scale */
  --fs-1: clamp(14px, 1.4vw, 15px);
  --fs-2: clamp(16px, 1.6vw, 17px);
  --fs-3: clamp(18px, 1.8vw, 19px);
  --fs-4: clamp(20px, 2vw, 22px);
}

/* -------------------- */
/* TOKENS (light)       */
/* -------------------- */
html[data-theme="light"]{
  --bg: #FFFFFF;
  --surface: #FFFFFF;
  --panel: #FFFFFF;
  --panel-2: #F7F8F8;
  --card: #FFFFFF;

  --text: #0C0D0E;
  --muted: #5C6269;
  --stroke: rgba(0,0,0,0.08);

  --canvas-bg: #F7F8F8;
}

/* -------------------- */
/* THEME OVERRIDES      */
/* -------------------- */
/* Buttons in light mode: friendlier than dark blends */
html[data-theme="light"] :is(.btn.brand, .pill-btn.brand){
  background: color-mix(in oklab, var(--brand) 92%, white 8%);
  border-color: color-mix(in oklab, var(--brand) 50%, var(--stroke) 50%);
  color: white;
}
html[data-theme="light"] :is(.btn.brand:hover, .pill-btn.brand:hover){
  background: color-mix(in oklab, var(--brand) 100%, white 0%);
}

/* -------------------- */
/* RESET + BASE         */
/* -------------------- */
*{ box-sizing: border-box; }
html, body{ height:100%; }
body{
  margin:0;
  font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Ubuntu, Cantarell, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
  line-height: 1.45;
  color: var(--text);
  background:
    radial-gradient(800px 400px at 70% -10%, rgba(32,40,48,.26) 0%, rgba(32,40,48,0) 55%),
    conic-gradient(from 180deg at 50% -20%, rgba(255,255,255,.06), rgba(255,255,255,0)),
    var(--bg);
}
a{ color:inherit; text-decoration:none; }
button{ cursor:pointer; font:inherit; }
:where(a,button,input,textarea,select):focus-visible{
  outline:2px solid var(--brand); outline-offset:2px; border-radius:8px;
}
@media (prefers-reduced-motion: reduce){
  *{ animation-duration: .001ms!important; animation-iteration-count:1!important; transition-duration:.001ms!important; scroll-behavior:auto!important; }
}

/* -------------------- */
/* LAYOUT               */
/* -------------------- */
header.nav{
  position:sticky; top:0; z-index:30;
  background: color-mix(in oklab, var(--surface) 94%, transparent);
  backdrop-filter: saturate(130%) blur(8px);
  border-bottom:1px solid var(--stroke);
}
.nav-inner{ display:flex; align-items:center; gap:12px; padding:10px clamp(12px,3vw,20px); }
.brand{ display:flex; align-items:center; gap:10px; font-weight:750; letter-spacing:.2px; }
.brand .logo{
  width:30px; height:30px; border-radius:8px; display:grid; place-items:center;
  background: var(--panel-2);
  border:1px solid var(--stroke);
  box-shadow: 0 0 0 2px rgba(20,163,127,.12);
}
.search-wrap{ flex:1; display:flex; justify-content:center; }
.search{
  width:min(720px,95%); display:flex; align-items:center; gap:10px;
  background:var(--panel); border:1px solid var(--stroke); border-radius:999px; padding:10px 14px;
  box-shadow: inset 0 1px 0 rgba(255,255,255,.02);
}
.search input{ flex:1; background:transparent; border:0; color:var(--text); outline:none; font-size:var(--fs-2); }
.nav-cta{ margin-left:auto; display:flex; gap:8px; }

.layout{
  display:grid; grid-template-columns: 260px 1fr; gap:18px;
  padding:18px; max-width:1360px; margin-inline:auto;
}
.content{ min-height:60vh; grid-column:1 / -1; } /* centers the studio row */

/* -------------------- */
/* UTIL SURFACES        */
/* -------------------- */
.u-surface{ background:var(--panel); border:1px solid var(--stroke); border-radius:var(--radius); }

/* -------------------- */
/* COMPONENTS           */
/* -------------------- */

/* Sidebar */
.sidebar{ composes: u-surface; /* (ignore if your tooling lacks 'composes') */
  background:var(--panel); border:1px solid var(--stroke); border-radius:var(--radius);
  padding:12px; position:sticky; top:72px; height:calc(100vh - 90px); overflow:auto;
}
.sidebar h3{ margin:10px 10px 4px; font-size:12px; text-transform:uppercase; letter-spacing:1px; color:var(--muted); }
.subs-list{ display:flex; flex-direction:column; gap:6px; padding:6px; }
.sub-item{ display:flex; align-items:center; gap:10px; padding:8px; border-radius:10px; transition:background .15s ease; }
.sub-item:hover{ background:var(--panel-2); }
.avatar{ width:28px; height:28px; border-radius:999px; background: radial-gradient(35% 35% at 30% 30%, #2BB891 0%, #14A37F 45%, var(--panel-2) 100%); border:1px solid var(--stroke); }

/* Studio / Prompt */
.studio{ background:var(--panel); border:1px solid var(--stroke); border-radius:var(--radius); padding:16px; display:grid; gap:14px; box-shadow:var(--shadow); width:min(980px,100%); justify-self:center; }
.prompt-wrap{ display:flex; align-items:flex-start; gap:10px; background:var(--card); border:1px solid var(--stroke); padding:12px; border-radius:14px; }
.prompt-wrap textarea{flex: 1;
  min-height: 68px;
  max-height: 220px;
  width: 100%;
  resize: vertical;
  background: transparent;
  font-family: "Inter", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
  font-size: 1rem;
  line-height: 1.5;
  color: var(--text); }
.prompt-actions{ display:flex; flex-wrap:wrap; gap:8px; }
.canvas-wrap{ display:grid; grid-template-columns: 1fr 380px; gap:14px; }
.play-area{ background:var(--panel-2); border:1px solid var(--stroke); border-radius:14px; padding:14px; display:grid; place-items:center; }
.play-area canvas{ background:var(--canvas-bg); border-radius:10px; width:100%; height:auto; aspect-ratio:16/10; border:1px solid rgba(0,0,0,.03); }
.game-meta{ background:var(--panel-2); border:1px solid var(--stroke); border-radius:14px; padding:14px; display:flex; flex-direction:column; gap:10px; }
.field{ display:flex; flex-direction:column; gap:6px; }
.field :is(input, textarea, select){ background:var(--panel); border:1px solid var(--stroke); color:var(--text); padding:10px 12px; border-radius:10px; outline:none; }
.field :is(input, textarea)::placeholder{ color: color-mix(in oklab, var(--muted) 80%, transparent); }
.studio label,
.studio .field label {
  font-family: "Inter", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
               Roboto, Helvetica, Arial, sans-serif;
  font-size: 1rem;
  font-weight: 400;
  color: var(--text);
}

/* Cards / grids */
.grid{ display:grid; grid-template-columns: repeat(auto-fill, minmax(220px,1fr)); gap:14px; }
.card{ background:var(--panel); border:1px solid var(--stroke); border-radius:14px; overflow:hidden; display:flex; flex-direction:column; transition: transform .08s ease, border-color .15s ease; }
.card:hover{ transform: translateY(-1px); border-color: color-mix(in oklab, var(--stroke) 70%, var(--brand) 30%); }
.thumb{
  position: relative;
  background: var(--panel-2);
  height: 130px;
  display: grid;
  place-items: center;
  line-height: 0;                  /* removes stray inline spacing around the img */
}
.thumb .pill{
  position: absolute;
  top: 8px; left: 8px;
  padding: 6px 12px;               /* slightly larger for legibility */
  border-radius: 999px;
  font-weight: 600;
  font-size: 12px;
  z-index: 2;                      /* ensure it’s above the image */
  background: rgba(0,0,0,.36);     /* dark-mode default (also a safe fallback) */
  color: #fff;
  border: 1px solid rgba(255,255,255,.18);
}

/* light theme variant */
html[data-theme="light"] .thumb .pill{
  background: rgba(255,255,255,.72);
  color: var(--text);
  border-color: rgba(0,0,0,.08);
}
.thumb img{ width:100%; height:100%; object-fit:cover; }
.card .info{
  position: relative;              /* ensure it paints over the thumbnail */
  z-index: 1;
  background: var(--panel);        /* solid panel so titles never look “under” the image */
  padding: 14px 16px 16px;         /* a touch more breathing room */
  display: grid;
  gap: 8px;
  box-shadow: inset 0 1px 0 var(--stroke); /* subtle divider line above the text row */
}
.mini{ display:flex; align-items:center; gap:8px; color:var(--muted); font-size:13px; }

/* Game page */
.game-page{ display:grid; grid-template-columns: 1fr 360px; gap:16px; }
.game-hero{ background:var(--panel); border:1px solid var(--stroke); border-radius:14px; padding:12px; box-shadow:var(--shadow); }
.game-hero canvas{ width:100%; height:auto; aspect-ratio:16/10; background:var(--canvas-bg); border-radius:10px; border:1px solid rgba(0,0,0,.03); }
.game-side{ display:flex; flex-direction:column; gap:12px; }
.game-box{ background:var(--panel); border:1px solid var(--stroke); border-radius:14px; padding:12px; }
.row{ display:flex; align-items:center; gap:8px; }
.row.spread{ justify-content:space-between; }
.comment{ border-top:1px dashed var(--stroke); padding:8px 0; }
.comment small{ color:var(--muted); }

/* Buttons / Pills */
.btn{ background:var(--panel); border:1px solid var(--stroke); color:var(--text); padding:9px 13px; border-radius:10px; font-weight:600; transition: transform .06s ease, background .2s ease, border-color .2s ease; }
.btn:hover{ background: color-mix(in oklab, var(--panel) 85%, white 0%); transform: translateY(-1px); }
.btn:active{ transform: translateY(0); }
.btn.brand{ background: color-mix(in oklab, var(--brand) 18%, black 82%); border-color: color-mix(in oklab, var(--brand) 35%, black 65%); color:white; }
.btn.ghost{ background:transparent; border:1px solid var(--stroke); }

.pill-btn{ background:var(--panel); border:1px solid var(--stroke); padding:8px 12px; border-radius:999px; font-weight:600; transition: background .15s, border-color .15s, transform .06s; }
.pill-btn:hover{ background: color-mix(in oklab, var(--panel) 85%, white 0%); transform: translateY(-1px); }
.pill-btn.brand{ background: color-mix(in oklab, var(--brand) 18%, black 82%); border-color: color-mix(in oklab, var(--brand) 35%, black 65%); color:white; }

.section-title{ display:flex; align-items:center; justify-content:space-between; margin:16px 0 10px; }
.section-title h2{ font-size:var(--fs-3); margin:0; }

/* Modals */
.modal{ position:fixed; inset:0; display:none; place-items:center; background:rgba(0,0,0,.55); z-index:50; }
.modal.active{ display:grid; }
html[data-theme="light"] .modal{ background: rgba(0,0,0,.35); }
.dialog{ width:min(520px,92%); background:var(--panel); border:1px solid var(--stroke); border-radius:16px; padding:16px; box-shadow:var(--shadow); }
.dialog h3{ margin-top:0; }

/* Links */
.link{ color:var(--brand-2); font-weight:600; }
.link:hover{ text-decoration:underline; text-underline-offset:2px; }

/* Empty state */
.empty{ border:1px dashed var(--stroke); background: color-mix(in oklab, var(--panel) 88%, white 0%); padding:18px; border-radius:14px; text-align:center; color:var(--muted); }

/* -------------------- */
/* UTILITIES            */
/* -------------------- */
.centered{ margin-inline:auto; }
.hidden{ display:none !important; }

/* -------------------- */
/* MEDIA QUERIES        */
/* -------------------- */
@media (max-width:1024px){
  .canvas-wrap{ grid-template-columns:1fr; }
  .game-page{ grid-template-columns:1fr; }
  .layout{ grid-template-columns:1fr; }
  .sidebar{ display:none; }
  .search{ width:100%; }
}

/* --- Card fixes for #cardTemplate (exact classes) --- */

/* clip image to the rounded card and create stable layout */
.card{
  overflow: hidden;
  border-radius: 14px; /* you already have 14px; keep it consistent */
  background: var(--panel);
}

/* make the thumbnail a positioned container so z-index works predictably */
.card .thumb{
  position: relative;
  display: block;
  line-height: 0;            /* strips extra inline spacing around the img */
}

/* the image itself */
.card .thumb [data-thumb]{
  display: block;
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* the bottom info strip sits above the image and has a solid surface */
.card .info{
  position: relative;        /* new stacking context */
  z-index: 1;                /* ensure it paints over the thumbnail */
  background: var(--panel);  /* solid panel for legibility */
  padding: 14px 16px 16px;   /* a touch more space so the title isn’t tight */
  box-shadow: inset 0 1px 0 var(--stroke); /* subtle divider line */
}

/* title spacing & legibility */
.card [data-title]{
  display: block;
  margin: 0 0 4px;
  line-height: 1.2;
  font-weight: 800;
  font-size: 1.25rem;
  color: var(--text);
}

/* Trending pill: readable on vivid gradients */
.card .thumb .pill{
  position: absolute;
  top: 12px; left: 12px;
  padding: 6px 12px;
  border-radius: 999px;
  font-weight: 600;
  z-index: 2;                        /* above the image */
  background: rgba(0,0,0,.36);
  color: #fff;
  border: 1px solid rgba(255,255,255,.18);
}

/* light theme variant */
html[data-theme="light"] .card .thumb .pill{
  background: rgba(255,255,255,.72);
  color: var(--text);
  border-color: rgba(0,0,0,.08);
}
